<!DOCTYPE html>
<html>

    <head>
        <% include ./partials/head %>
            <script src="https://apis.google.com/js/platform.js" async defer></script>
            <meta name="google-signup-client_id" content="966622929148-22jointu1o40re7eebui79l2hfabfoj3.apps.googleusercontent.com">
            <script type="text/javascript" src="../public/facebook.js"></script>
    </head>

    <body>
        <% include ./partials/nav %>

            <div class="container user user-new">
                <form class="user-form form-horizontal" name="myform" id="target" action="/signup" method="post" onsubmit="addMySiteToUsername()">

                    <h3 class="contentBoxTop">New User</h3>

                    <div class="form-group">
                        <label for="username" class="col-sm-3 control-label">Username*</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="text" id="username" name="username" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="name" class="col-sm-3 control-label">Name*</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="text" id="name" name="name" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="email" class="col-sm-3 control-label">Email</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="text" id="email" name="email" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="password" class="col-sm-3 control-label">Password*</label>
                        <div class="col-sm-9">
                            <input class="form-control" type="password" id="password" name="password" value="">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="passwordConfirmation" class="col-sm-3 control-label">Password Confirmation*</label>
                        <div class="col-sm-9 ">
                            <input class="form-control" type="password" id="passwordConfirmation" name="passwordConfirmation" value="">
                        </div>
                    </div>
                    <p>
                        <small>*Required</small>
                    </p>
                    <script>
                        function addMySiteToUsername() {
                            document.getElementsByName('username')[0].value = document.getElementsByName('username')[0].value + ':MySite';
                            return true;
                        }

                    </script>

                    <div class="buttons">
                        <button type="submit" class="btn btn-default">Submit</button>
                    </div>
            </div>
            </form>


            <div class=" container contact contact-index ">
                <!-- google login button -->
                <div class="g-signin2 " data-onsuccess="onSignIn "></div>
                <!-- facebook login button -->
                <fb:login-button scope="public_profile,email " onlogin="checkLoginState(); "></fb:login-button>
            </div>


            <p id="keytest ">Some text here</p>

            <script>
                function post(path, params, method) {
                    method = method || "post "; // Set method to post by default if not specified.

                    // The rest of this code assumes you are not using a library.
                    // It can be made less wordy if you use one.
                    var form = document.createElement("form ");
                    form.setAttribute("method ", method);
                    form.setAttribute("action ", path);

                    for (var key in params) {
                        if (params.hasOwnProperty(key)) {
                            var hiddenField = document.createElement("input ");
                            hiddenField.setAttribute("type ", "hidden ");
                            hiddenField.setAttribute("name ", key);
                            hiddenField.setAttribute("value ", params[key]);

                            form.appendChild(hiddenField);
                        }
                    }

                    document.body.appendChild(form);
                    form.submit();
                }

                function onSignIn(googleUser) {
                    var profile = googleUser.getBasicProfile();
                    console.log('ID: ' + profile.getId()); // Do not send to your backend! Use an ID token instead.
                    console.log('Name: ' + profile.getName());
                    console.log('Image URL: ' + profile.getImageUrl());
                    console.log('Email: ' + profile.getEmail());

                    doument.getElementById("keytest ").innerHTML = profile.getEmail() + ":Google ";

                    post('/signup', {
                        email: profile.getEmail() + ":Google "
                    });
                }

            </script>
    </body>

</html>
</body>

</html>

</html>

</html>
